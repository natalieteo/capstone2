<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Contoso University</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link href="../../css/site.css" rel="stylesheet" />
    <title></title>
</head>
<body>
    <!-- Nav Bar -->
    <nav class="navbar navbar-expand-sm bg-light navbar-light">
        <a class="navbar-brand" href="#">Contoso University</a>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="students.html">Students</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="courses.html">Courses</a>
            </li>
        </ul>
    </nav>

    <div class="container pt-3">
        <div class="container">
            <h2>Students</h2>
            
                ID: <input type="text" id="studentId" value="" disabled /><br />
                Student Name: <input type="text" id="studentName" value="" /><br />
                Admission Date: <input type="text" id="admissionDate" value="" /><br />
                Course Name: <input type="text" id="courseName" value="" /><br />
                <!-- Buttons -->
                <input type="button" onclick="SaveData()" value="Save" />
                <input type="button" onclick="name" value="Update" /><br />
                <input type="button" onclick="GetData()" value="Get All" /><br />
            

            <table class="table" id="tb1">
                <thead class="thead-dark">
                    <tr>
                        <th>Student Name</th>
                        <th>Admission Date</th>
                        <th>Course Name</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <!--<tbody>
                    <tr>
                        <td>Finn</td>
                        <td>05/01/2020</td>
                        <td>IT</td>
                        <td>Edit</td>
                    </tr>
                    <tr>
                        <td>Mary</td>
                        <td>10/04/2020</td>
                        <td>Math</td>
                        <td>Edit</td>
                    </tr>
                    <tr>
                        <td>Jake</td>
                        <td>15/08/2020</td>
                        <td>Science</td>
                        <td>Edit</td>
                    </tr>
                </tbody>-->
            </table>
            </div>
        </div>
    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script>
        $(document).ready(function () {
            GetData();
        });

        function GetData() {
            $.get("http://localhost:3000/students/")
                .done(res => SuccessGet(res))
                .fail(res => Error(res));
        }

        function Success(res) {
            //to clear
            $('#studentName').val("");
            $('#admissionDate').val("");
            $('#courseName').val("");
            alert("Successfully Added");
            GetData();
        }

        function SuccessGet(res) {
            $('#tb1 td:not(:first)').remove();
            //make for loop to go thru the response
            for (temp of res) {
                $("#tb1").append('<tr id= "' + temp.id + '"><tr>' + temp.id + '</td><td>' + temp.name + '</td><td>' + temp.date + '</td><td>' + temp.course + '</td></tr>');
            }
        }
        function Error(res) {
            alert("Error")
            console.log(res);
        }

        function SaveData() {
            var student = {};
            //create student.name obj
            //grab from textbox using $
            student.name = $('#studentName').val();
            student.date = $('#admissionDate').val();
            student.course = $('#courseName').val();
            alert(student.name);
            alert(student.date);
            alert(student.course);
            $.post("http://localhost:3000/students/"
                , student) //cause we want to add to student
                .done(res => Success(res))//pass Success
                .fail(res => Error(res));//pass Error
        }
    </script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</body>
</html>